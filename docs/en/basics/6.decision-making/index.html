<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.59.1" />
    <meta name="description" content="Bash notes">
<meta name="author" content="Karl Jahn">

    <link rel="icon" href="/bash-notes/images/favicon.png" type="image/png">

    <title>Decision Making :: Bash notes</title>

    
    <link href="/bash-notes/css/nucleus.css?1593977766" rel="stylesheet">
    <link href="/bash-notes/css/fontawesome-all.min.css?1593977766" rel="stylesheet">
    <link href="/bash-notes/css/hybrid.css?1593977766" rel="stylesheet">
    <link href="/bash-notes/css/featherlight.min.css?1593977766" rel="stylesheet">
    <link href="/bash-notes/css/perfect-scrollbar.min.css?1593977766" rel="stylesheet">
    <link href="/bash-notes/css/auto-complete.css?1593977766" rel="stylesheet">
    <link href="/bash-notes/css/atom-one-dark-reasonable.css?1593977766" rel="stylesheet">
    <link href="/bash-notes/css/theme.css?1593977766" rel="stylesheet">
    <link href="/bash-notes/css/hugo-theme.css?1593977766" rel="stylesheet">
    
      <link href="/bash-notes/css/theme-green.css?1593977766" rel="stylesheet">
    

    <script src="/bash-notes/js/jquery-3.3.1.min.js?1593977766"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="/bash-notes/en/basics/6.decision-making/">
    <nav id="sidebar" class="showVisitedLinks">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="/bash-notes">
  <img
    src="https://raw.githubusercontent.com/odb/official-bash-logo/master/assets/Logos/Icons/PNG/64x64.png"
    alt="Bash logo"
  />
</a>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/bash-notes/js/lunr.min.js?1593977766"></script>
<script type="text/javascript" src="/bash-notes/js/auto-complete.js?1593977766"></script>
<script type="text/javascript">
    
        var baseurl = "https:\/\/kajahno.me\/bash-notes\/\/en";
    
</script>
<script type="text/javascript" src="/bash-notes/js/search.js?1593977766"></script>

    
  </div>

    <div class="highlightable">
    <ul class="topics">

        
          
          


 
  
    
    <li data-nav-id="/bash-notes/en/basics/" title="Basics" class="dd-item 
        parent
        
        
        ">
      <a href="/bash-notes/en/basics/">
          <b>1. </b>Basics
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/bash-notes/en/basics/1.introduction/" title="Introduction" class="dd-item 
        
        
        
        ">
      <a href="/bash-notes/en/basics/1.introduction/">
          Introduction
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/bash-notes/en/basics/2.io-redirection/" title="IO Redirection" class="dd-item 
        
        
        
        ">
      <a href="/bash-notes/en/basics/2.io-redirection/">
          IO Redirection
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/bash-notes/en/basics/3.shell-pipelines/" title="Shell Pipelines" class="dd-item 
        
        
        
        ">
      <a href="/bash-notes/en/basics/3.shell-pipelines/">
          Shell Pipelines
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/bash-notes/en/basics/4.job-management/" title="Job Management" class="dd-item 
        
        
        
        ">
      <a href="/bash-notes/en/basics/4.job-management/">
          Job Management
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/bash-notes/en/basics/5.bash-options/" title="Bash options" class="dd-item 
        
        
        
        ">
      <a href="/bash-notes/en/basics/5.bash-options/">
          Bash options
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/bash-notes/en/basics/6.decision-making/" title="Decision Making" class="dd-item 
        parent
        active
        
        ">
      <a href="/bash-notes/en/basics/6.decision-making/">
          Decision Making
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/bash-notes/en/basics/7.success-or-failure/" title="Success of Failure" class="dd-item 
        
        
        
        ">
      <a href="/bash-notes/en/basics/7.success-or-failure/">
          Success of Failure
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/bash-notes/en/basics/8.variables/" title="Variables" class="dd-item 
        
        
        
        ">
      <a href="/bash-notes/en/basics/8.variables/">
          Variables
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/bash-notes/en/basics/9.bash-scripts/" title="Bash scripts" class="dd-item 
        
        
        
        ">
      <a href="/bash-notes/en/basics/9.bash-scripts/">
          Bash scripts
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/bash-notes/en/basics/10.flow-control/" title="Flow control" class="dd-item 
        
        
        
        ">
      <a href="/bash-notes/en/basics/10.flow-control/">
          Flow control
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/bash-notes/en/basics/11.command-substitution/" title="Command substitution" class="dd-item 
        
        
        
        ">
      <a href="/bash-notes/en/basics/11.command-substitution/">
          Command substitution
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/bash-notes/en/basics/11.logic-and-arithmetic/" title="Logic and Arithmetic" class="dd-item 
        
        
        
        ">
      <a href="/bash-notes/en/basics/11.logic-and-arithmetic/">
          Logic and Arithmetic
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/bash-notes/en/basics/12.functions/" title="Functions" class="dd-item 
        
        
        
        ">
      <a href="/bash-notes/en/basics/12.functions/">
          Functions
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/bash-notes/en/reference/" title="Command reference" class="dd-item 
        
        
        
        ">
      <a href="/bash-notes/en/reference/">
          <b>2. </b>Command reference
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/bash-notes/en/reference/io-redirection/" title="io-redirection" class="dd-item 
        
        
        
        ">
      <a href="/bash-notes/en/reference/io-redirection/">
          io-redirection
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
         
    </ul>

    
    
      <section id="shortcuts">
        <h3>More</h3>
        <ul>
          
              <li> 
                  <a class="padding" href="https://github.com/kajahno/bash-notes"><i class='fab fa-fw fa-github'></i> GitHub repo</a>
              </li>
          
              <li> 
                  <a class="padding" href="https://gohugo.io/"><i class='fas fa-fw fa-bookmark'></i> Hugo Documentation</a>
              </li>
          
              <li> 
                  <a class="padding" href="https://kajahno.me/bash-notes/en/credits"><i class='fas fa-fw fa-bullhorn'></i> Credits</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="prefooter">
      <hr/>
      <ul>
      
        <li>
          <a class="padding">
            <i class="fas fa-language fa-fw"></i>
          <div class="select-style">
            <select id="select-language" onchange="location = this.value;">
          
          
          
              
              
                  
                    
                    
                      <option id="en" value="https://kajahno.me/bash-notes/en/basics/6.decision-making/" selected>English</option>
                    
                  
              
                  
              
          
              
              
                  
              
                  
                    
                    
                      <option id="es" value="https://kajahno.me/bash-notes/es/basics/6.decision-making/">Espa√±ol</option>
                    
                  
              
          
        </select>
        <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
          width="255px" height="255px" viewBox="0 0 255 255" style="enable-background:new 0 0 255 255;" xml:space="preserve">
          <g>
            <g id="arrow-drop-down">
              <polygon points="0,63.75 127.5,191.25 255,63.75 		" />
            </g>
          </g>
        </svg>
        </div>
        </a>
        </li>
      
      
      
        <li><a class="padding" href="#" data-clear-history-toggle=""><i class="fas fa-history fa-fw"></i> Clear History</a></li>
      
      </ul>
    </section>
    
    <section id="footer">
      <center>
  
  <a
    class="github-button"
    href="https://github.com/kajahno/bash-notes/archive/master.zip"
    data-icon="octicon-cloud-download"
    aria-label="Download this repo from GitHub"
    >Download</a
  >

  
  <a
    class="github-button"
    href="https://github.com/kajahno/bash-notes"
    data-icon="octicon-star"
    data-show-count="true"
    aria-label="Star kajahno/bash-notes on GitHub"
    >Star</a
  >

  
  <a
    class="github-button"
    href="https://github.com/kajahno/bash-notes/fork"
    data-icon="octicon-repo-forked"
    data-show-count="true"
    aria-label="Fork kajahno/bash-notes on GitHub"
    >Fork</a
  >

  
  <a
    class="github-button"
    href="https://github.com/kajahno"
    aria-label="Follow @kajahno on GitHub"
    >Follow @kajahno</a
  >

  
  <a
    class="github-button"
    href="https://github.com/kajahno/bash-notes/subscription"
    data-icon="octicon-eye"
    aria-label="Watch kajahno/bash-notes on GitHub"
    >Watch</a
  >

  
  <a
    class="github-button"
    href="https://github.com/kajahno/bash-notes/issues"
    data-icon="octicon-issue-opened"
    aria-label="Issue kajahno/bash-notes on GitHub"
    >Issue</a
  >

  <p>Made by <a href="https://github.com/kajahno">kajahno</a></p>
  <p>Last updated on Jul 05, 2020</p>
</center>

<script async defer src="https://buttons.github.io/buttons.js"></script>

    </section>
  </div>
</nav>





        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                  
                  
                  
                  <div id="top-github-link">
                    <a class="github-link" title='Edit this page' href="https://github.com/kajahno/bash-notes/edit/master/content/basics/6.decision-making/_index.en.md" target="blank">
                      <i class="fas fa-code-branch"></i>
                      <span id="top-github-link-text">Edit this page</span>
                    </a>
                  </div>
                  
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            <a href='/bash-notes/en/'>Bash notes</a> > <a href='/bash-notes/en/basics/'>Basics</a> > Decision Making
          
         
          
         
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#inline-syntax">Inline syntax</a>
<ul>
<li>
<ul>
<li><a href="#and-case"><strong>And</strong> (<code>&amp;&amp;</code>) case</a></li>
<li><a href="#or-case"><strong>Or</strong> (<code>||</code>) case</a></li>
<li><a href="#combining-and">Combining <code>&amp;&amp;</code> and <code>||</code></a></li>
</ul></li>
</ul></li>
<li><a href="#extended-syntax">Extended syntax</a></li>
</ul></li>
</ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              Decision Making
            </h1>
          

        




	

<p>Making decisions help our scripts to have better flow control and add additionally robustness and avoid repetition.</p>

<h2 id="inline-syntax">Inline syntax</h2>

<p>This syntax is composed of two operators: and (<code>&amp;&amp;</code>) and or <code>||</code></p>

<h4 id="and-case"><strong>And</strong> (<code>&amp;&amp;</code>) case</h4>

<p>Run a command and run another one if the former was successful:</p>

<pre><code class="language-bash">$ ls &amp;&amp; echo 'yay, command was successful'
combined-output  long-time  newerr     output   somefile error_output     myfile     newoutput  script1
</code></pre>

<p>As shown before, of course we can redirect stdout of the former command:</p>

<pre><code class="language-bash">$ ls 1&gt;/dev/null &amp;&amp; echo 'yay, command was successful'
yay, command was successful
</code></pre>


<div class="notices note" ><p>redirecting to <code>/dev/null</code> basically means that we&rsquo;re discarding the output</p>
</div>


<h4 id="or-case"><strong>Or</strong> (<code>||</code>) case</h4>

<p>Run a command and run another one if the former failed:</p>

<pre><code class="language-bash">$ ls /nonexistent || echo 'partition /nonexistent does not exist'
ls: cannot access '/nonexistent': No such file or directory
partition /nonexistent does not exist
</code></pre>

<p>As shown before, of course we can redirect stderr of the former command:</p>

<pre><code class="language-bash">$ ls /nonexistent 2&gt;/dev/null || echo 'partition /nonexistent does not exist'
partition /nonexistent does not exist
</code></pre>

<h4 id="combining-and">Combining <code>&amp;&amp;</code> and <code>||</code></h4>

<p>Sometimes is useful to run a command when another one is successful, and another one when it fails.</p>

<p>For example consider the following command:</p>

<pre><code class="language-bash">$ cd /tmp &amp;&amp; echo 'command succeeded, removing old files' || echo 'command failed, aborting'
command succedded
</code></pre>

<p>In case it succeeds we could perform some housekeeping operation and remove old logs. On the other hand if the command failed we would most likely want to abort and exit</p>

<p>Of course at this point we have only <code>echoes</code> so nothing is actually done. If we were to perform this sort of housekeeping using these operators it would be something similar to:</p>

<ul>
<li><p>Case of success</p>

<pre><code class="language-bash">$ cd /tmp &amp;&amp; { echo 'command succeeded, removing old files' &amp;&amp; find -type f -mtime +2 -delete &amp;&amp; echo 'files removed';} || { echo 'command failed, aborting';}
command succeeded, removing old files
files removed
</code></pre></li>

<li><p>Case of failure</p>

<pre><code class="language-bash">$ cd /tmp2 &amp;&amp; { echo 'command succeeded, removing old files' &amp;&amp; find -type f -mtime +2 -delete &amp;&amp; echo 'files removed';} || echo 'command failed, aborting'
-bash: cd: /tmp2: No such file or directory
command failed, aborting
</code></pre></li>
</ul>

<p>As you can see to perform this operation, things start to get fiddly. In order to group decisions we would need to envelop them in curly braces, and to make things worse, the closing curly brace must have a semicolon just before.

<div class="notices warning" ><p>Please do not use this as a reference to write long bash scripts. Your future self will appreciate when you have to change and old script without all these conditions in it.</p>
</div>


<div class="notices note" ><p>The command <code>find -type f -mtime +2 -delete</code> means: find files only with more than 2 days older and delete them</p>
</div>
</p>

<h2 id="extended-syntax">Extended syntax</h2>

<p>Using last example as a reference, let&rsquo;s refactor using an <code>if</code> statement:</p>

<pre><code class="language-bash">if cd /tmp
then
    echo 'command succeeded, removing old files'
    if find -type f -mtime +2 -delete; then
        echo 'files removed'
    else
        echo 'files failed to remove'
    fi
else
    echo 'command failed, aborting'
fi
command succeeded, removing old files
files removed
</code></pre>

<p>A couple of things to notice here:</p>

<ul>
<li>the first line of the if statement can have the <code>then</code> next, provided that it&rsquo;s specified as a separate command (using semicolon)</li>
<li>syntax is super clear and easier to maintain</li>
<li>there is a bit of repetition in the case of failure</li>
<li>After the <code>then</code> we don&rsquo;t really need a newline or separator, so this would work just fine: <code>if CONDITION; then echo 'something; fi</code></li>
</ul>

<p>Using the syntax <code>if TEST; then</code> as an example. What goes in between <code>if</code> and <code>then</code> is called a &lsquo;test command&rsquo;. The amount of test commands in Bash could be intimidating at first, but once you get the hang of it, they make a lot of sense and are easy to remember. A list of those can be found in <a href="http://tldp.org/LDP/Bash-Beginners-Guide/html/sect_07_01.html" target="_blank">here</a>.</p>

<p>As an extended example here&rsquo;s how to ask for another condition just before the default <code>else</code>:</p>

<pre><code class="language-bash">if cd /tmp2
then
    echo 'command succeeded, removing old files'
    if find -type f -mtime +2 -delete; then
        echo 'files removed'
    else
        echo 'files failed to remove'
    fi
elif cd /tmp
then
    echo 'second command succeeded'
else
    echo 'command failed, aborting'
fi
-bash: cd: /tmp2: No such file or directory
second command succeeded
</code></pre>





<footer class=" footline" >
	
</footer>

        
        </div> 
        

      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
        
        


	 
	 
		
			<a class="nav nav-prev" href="/bash-notes/en/basics/5.bash-options/" title="Bash options"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="/bash-notes/en/basics/7.success-or-failure/" title="Success of Failure" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/bash-notes/js/clipboard.min.js?1593977766"></script>
    <script src="/bash-notes/js/perfect-scrollbar.min.js?1593977766"></script>
    <script src="/bash-notes/js/perfect-scrollbar.jquery.min.js?1593977766"></script>
    <script src="/bash-notes/js/jquery.sticky.js?1593977766"></script>
    <script src="/bash-notes/js/featherlight.min.js?1593977766"></script>
    <script src="/bash-notes/js/highlight.pack.js?1593977766"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/bash-notes/js/modernizr.custom-3.6.0.js?1593977766"></script>
    <script src="/bash-notes/js/learn.js?1593977766"></script>
    <script src="/bash-notes/js/hugo-learn.js?1593977766"></script>

    <link href="/bash-notes/mermaid/mermaid.css?1593977766" rel="stylesheet" />
    <script src="/bash-notes/mermaid/mermaid.js?1593977766"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    
<script
  async
  src="https://www.googletagmanager.com/gtag/js?id=UA-128617327-2"
></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag() {
    dataLayer.push(arguments);
  }
  gtag("js", new Date());

  gtag("config", "UA-128617327-2");
</script>

  </body>
</html>
